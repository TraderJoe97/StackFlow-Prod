@using System.Security.Claims
@model StackFlow.ViewModels.UserReportsCombinedViewModel

@{
    ViewData["Title"] = "User Reports";

    // Get the active tab from query string or default to "activeUsers"
    var activeTab = Context.Request.Query["tab"].FirstOrDefault() ?? "activeUsers";

    // Active Users Pagination Data
    var activeCurrentPage = Model.ActiveUsersCurrentPage;
    var activePageSize = Model.ActiveUsersPageSize;
    var activeTotalPages = Model.ActiveUsersTotalPages;
    var activeSearchQuery = Model.ActiveUsersSearchQuery;

    // Pending Users Pagination Data
    var pendingCurrentPage = Model.PendingUsersCurrentPage;
    var pendingPageSize = Model.PendingUsersPageSize;
    var pendingTotalPages = Model.PendingUsersTotalPages;

    var currentUserId = ViewBag.CurrentUserId;
}

<div class="card shadow-lg border-0 rounded-4 p-4 mt-4 mb-4">
    <div class="card-header bg-transparent border-0 p-0 mb-4">
        <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center">
            <h2 class="fw-bold mb-3 mb-md-0">User Management</h2>
            <ul class="nav nav-tabs card-header-tabs d-flex flex-row" id="userReportsTabs" role="tablist">
                <li class="nav-item me-2" role="presentation">
                    <button class="nav-link @(activeTab == "activeUsers" ? "active" : "") rounded-pill"
                            id="active-users-tab" data-bs-toggle="tab"
                            data-bs-target="#activeUsersContent" type="button" role="tab"
                            aria-controls="activeUsersContent" aria-selected="@(activeTab == "activeUsers" ? "true" : "false")">
                        Active Users
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link @(activeTab == "pendingUsers" ? "active" : "") rounded-pill"
                            id="pending-users-tab" data-bs-toggle="tab"
                            data-bs-target="#pendingUsersContent" type="button" role="tab"
                            aria-controls="pendingUsersContent" aria-selected="@(activeTab == "pendingUsers" ? "true" : "false")">
                        Pending Verification
                    </button>
                </li>
            </ul>
        </div>
    </div>
