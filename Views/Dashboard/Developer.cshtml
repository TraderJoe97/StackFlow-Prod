@model List<StackFlow.Models.Ticket>;

@{
    ViewData["Title"] = "Dashboard";
}

<div class="dashboard-header mb-4">
    <h1 class="display-4 fw-bold text-primary">Welcome, @User.Identity.Name</h1>
</div>


<div class="row">

    <div class="row">
        <!-- To Do Tasks -->
        <div class="col-md-4 mb-4">
            <div class="card shadow-sm border-0 rounded-4 h-100">
                <div class="card-header bg-gradient-info text-white rounded-top-4 py-3">
                    <h5 class="mb-0 fw-bold"><i class="bi bi-hourglass me-2"></i>To Do Tasks</h5>
                </div>
                <div class="card-body">
                        <ul class="list-group list-group-flush">
                            @foreach (var ticket in Model.OrderBy(t => t.Due_Date))
                            {
                                <li class="list-group-item d-flex justify-content-between align-items-center border-0">
                                    <div>
                                        <h6 class="mb-1">@ticket.Title</h6>
                                        <small class="text-muted">Due: @ticket.Due_Date.ToShortDateString()</small>
                                    </div>
                                <a asp-action="Details" asp-controller="Ticket" asp-route-id="@ticket.Id" class="btn btn-sm btn-outline-secondary rounded-pill">View <i class="bi bi-arrow-right"></i></a>
                                </li>
                            }
                        </ul>
                </div>
            </div>
        </div>

        <!-- In Progress Tasks -->
        <div class="col-md-4 mb-4">
            <div class="card shadow-sm border-0 rounded-4 h-100">
                <div class="card-header bg-gradient-warning text-white rounded-top-4 py-3">
                    <h5 class="mb-0 fw-bold"><i class="bi bi-play-circle-fill me-2"></i>In Progress Tasks</h5>
                </div>
                <div class="card-body">
                        <ul class="list-group list-group-flush">
                            @foreach (var ticket in Model.OrderBy(t => t.Due_Date))
                            {
                                <li class="list-group-item d-flex justify-content-between align-items-center border-0">
                                    <div>
                                        <h6 class="mb-1">@ticket.Title</h6>
                                        <small class="text-muted">Due: @ticket.Due_Date.ToShortDateString()</small>
                                    </div>
                                <a asp-action="Details" asp-controller="Ticket" asp-route-id="@ticket.Id" class="btn btn-sm btn-outline-secondary rounded-pill">View <i class="bi bi-arrow-right"></i></a>
                                </li>
                            }
                        </ul>
                    
                </div>
            </div>
        </div>

        <!-- Completed Tasks -->
        <div class="col-md-4 mb-4">
            <div class="card shadow-sm border-0 rounded-4 h-100">
                <div class="card-header bg-gradient-success text-white rounded-top-4 py-3">
                    <h5 class="mb-0 fw-bold"><i class="bi bi-check-circle-fill me-2"></i>Completed Tasks</h5>
                </div>
                <div class="card-body">
                        <ul class="list-group list-group-flush">
                            @foreach (var ticket in Model.OrderByDescending(t => t.Completed_At))
                            {
                                <li class="list-group-item d-flex justify-content-between align-items-center border-0 text-muted">
                                    <div>
                                        <h6 class="mb-1 text-decoration-line-through">@ticket.Title</h6>
                                        <small>Completed: @ticket.Completed_At.ToShortDateString()</small>
                                    </div>
                                    <a asp-action="Details" asp-controller="Ticket" asp-route-id="@ticket.Id" class="btn btn-sm btn-outline-secondary rounded-pill">View <i class="bi bi-arrow-right"></i></a>
                                </li>
                            }
                        </ul>
                    
                </div>
            </div>
        </div>
    </div>
</div>




@section Scripts {
    <!-- Any dashboard-specific JavaScript could go here -->
}

<style>
    /* Custom Gradient Backgrounds for Card Headers */
    .bg-gradient-primary {
        background: linear-gradient(45deg, #007bff, #0056b3);
    }

    .bg-gradient-success {
        background: linear-gradient(45deg, #28a745, #1e7e34);
    }

    .bg-gradient-info {
        background: linear-gradient(45deg, #17a2b8, #117a8b);
    }

    .bg-gradient-warning {
        background: linear-gradient(45deg, #ffc107, #d39e00);
    }

    /* Card styling enhancements */
    .card {
        transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    }

        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(0,0,0,.08);
        }

    /* List group item styling for better appearance */
    .list-group-item-action:hover {
        background-color: #e9ecef;
    }

    .list-group-item.shadow-sm {
        box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075) !important;
    }

        .list-group-item.shadow-sm:hover {
            box-shadow: 0 0.25rem 0.75rem rgba(0, 0, 0, 0.1) !important;
        }

    /* Badges in list items */
    .list-group-item .badge {
        min-width: 80px;
        text-align: center;
        padding: 0.5em 0.8em;
    }

    /* Small font for details */
    small {
        font-size: 0.875em;
    }
</style>
